# 系统路由配置管理器

一个简单直观的GUI程序，用于管理和配置系统路由表，包含详细的错误提示和调试功能。

## 功能特点

- 📊 **可视化路由表** - 清晰展示当前系统的所有路由信息
- ➕ **添加路由** - 通过友好界面添加新路由，包含输入验证
- ➖ **删除路由** - 选择并删除不需要的路由
- 🔄 **实时刷新** - 一键更新路由表信息
- 🌐 **双协议支持** - 同时支持IPv4和IPv6路由管理
- 🔧 **详细错误提示** - 操作失败时提供具体的错误分析和解决建议
- 📝 **调试日志** - 实时显示程序执行过程和命令结果
- 🖥️ **跨平台支持** - 支持Windows、Linux和macOS

## 系统要求

- Python 3.6+
- Tkinter (Python内置GUI库)
- 管理员权限（添加/删除路由需要）

## 使用方法

### 启动程序（推荐）
```bash
# 双击运行（自动获取管理员权限，无控制台窗口）
双击 route_manager.bat

# 或直接运行（需要手动获取管理员权限）
python route_manager.py
```

### 功能说明

1. **选择协议版本**
   - 使用界面顶部的单选按钮在IPv4和IPv6之间切换
   - 不同协议版本会显示相应的路由表和管理选项

2. **查看路由表**
   - 启动程序后自动显示当前系统的IPv4路由表
   - 切换到IPv6可查看IPv6路由信息
   - 包含目标网络、子网掩码/前缀长度、网关、接口和跃点数信息

3. **添加路由**
   - 选择要添加的路由协议版本（IPv4或IPv6）
   - 点击"添加路由"按钮
   - IPv4：填写目标网络、子网掩码、网关等信息
   - IPv6：填写目标网络、前缀长度、网关等信息
   - **接口选择**：可选择特定网络接口或使用"自动选择"
   - 点击确定完成添加

4. **删除路由**
   - 在路由表中选择要删除的路由
   - 点击"删除路由"按钮
   - 确认删除操作

5. **刷新路由表**
   - 点击"刷新"按钮获取最新的路由信息

6. **测试命令**
   - 点击"测试命令"按钮验证route命令基础功能
   - 帮助诊断路由操作问题

### IPv6支持特性

- **IPv6路由显示**：支持显示IPv6路由表，包括默认路由、本地链路路由等
- **CIDR前缀长度**：IPv6使用前缀长度代替子网掩码（如/64）
- **智能解析**：自动识别IPv6地址格式和路由条目
- **双协议操作**：可同时管理IPv4和IPv6路由

## 界面说明

程序界面包含以下部分：

- **协议选择**：IPv4/IPv6单选按钮，用于切换路由表视图
- **按钮区域**：刷新、添加路由、删除路由、测试命令
- **路由表格**：显示选定协议版本的所有路由信息
- **调试日志**：实时显示程序执行过程和命令结果
- **状态栏**：显示操作状态和路由统计信息

### 路由添加对话框增强功能

- **接口选择下拉框**：
  - 自动选择：让系统自动选择合适的网络接口
  - 指定接口：精确选择路由要使用的网络接口
  - 显示接口名称和编号（如：12 - 以太网）

- **智能接口检测**：
  - 自动扫描系统中的所有网络接口
  - 支持以太网、Wi-Fi、虚拟网卡等多种接口类型
  - 提供接口编号和名称的清晰展示

## 错误处理和调试功能

### 详细错误提示
程序在操作失败时会提供：

1. **具体的错误信息**：显示执行的命令和错误输出
2. **错误原因分析**：智能识别常见的错误类型
3. **解决方案建议**：针对不同错误提供具体的解决步骤
4. **输入验证**：在添加路由前验证所有参数格式

### 常见错误类型
- **"Element not found"**：网关地址不存在，建议使用"On-link"或正确网关
- **"Access is denied"**：权限不足，需要以管理员身份运行
- **"Invalid parameter"**：参数格式错误，检查IP地址和掩码
- **"Already exists"**：路由已存在，无需重复添加

### 调试功能
- **实时日志**：显示所有命令执行过程
- **测试命令**：验证route命令是否正常工作
- **详细输出**：显示命令返回码和输出信息

## 使用建议

### 成功添加路由的关键点
1. **确保管理员权限**：右键命令提示符，选择"以管理员身份运行"
2. **使用正确的网关**：
   - 对于本地网络，使用"On-link"
   - 对于远程网络，使用可访问的网关IP
3. **验证参数格式**：
   - IPv4：目标网络+子网掩码+网关
   - IPv6：目标网络+前缀长度+网关

### 故障排除步骤
1. 点击"测试命令"按钮验证基础功能
2. 查看调试日志了解详细错误信息
3. 根据错误提示调整参数
4. 在命令提示符中手动测试命令

## 安全说明

⚠️ **重要提示**：
- 修改路由表可能影响网络连接
- 删除重要路由可能导致网络中断
- 建议在操作前备份重要路由信息
- 需要管理员/root权限才能修改路由表

## 技术实现

- **编程语言**：Python 3
- **GUI框架**：Tkinter
- **系统兼容性**：Windows (route命令)、Linux/macOS (ip route命令)

## 故障排除

### 常见问题
- **权限不足**：双击 `route_manager.bat` 会自动请求管理员权限
- **Python未找到**：确保已安装Python 3.6+并添加到PATH环境变量
- **程序无法启动**：确保 `route_manager.py` 和 `route_manager.bat` 在同一目录

## 许可证

本项目采用MIT许可证。